<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Maneiro.ai</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/app.css" />
</head>
<body>
  <header class="topBar">
    <div class="brand">
      <div class="brandMark" aria-label="Maneiro.ai">
        <img class="brandLogo" src="/static/img/logo.png" alt="maneiro" />
      </div>
    </div>

    
    <div class="topActions">
      <button id="faqBtn" class="iconBtn" type="button" title="FAQ">FAQ</button>
      <a class="iconBtn linkBtn" href="https://pubmed.ncbi.nlm.nih.gov/" target="_blank" rel="noreferrer" title="PubMed">PubMed</a>
      <button id="resetBtn" class="iconBtn" type="button" title="Reset">Reset</button>
    </div>
  </header>

  <div class="appGrid">
    <aside class="sideBar">
      <div class="sideHeader">
        <div class="sideTitle">Cases</div>
        <button id="newCaseBtn" class="sideBtn" type="button">New</button>
      </div>
      <div id="caseList" class="caseList"></div>
      <div class="sideHint">Cases are stored in this browser only.</div>
    </aside>

    <div class="mainArea">
      <section class="stepBar">
        <div class="stepTitle"><span class="stepPill">Step 1</span><span class="stepName">Analyze</span></div>
        <div class="stepControls">
          <input id="file" type="file" accept="application/pdf" class="fileInput" />
          <button id="uploadBtn" class="btnPrimary" type="button">Upload exam notes</button>
          <div id="analyzeStatus" class="stepStatus">Wait for analysis to complete (waiting)</div>
        </div>
        <div id="ocrPrompt" class="ocrPrompt hidden">
          <div class="ocrText">I could not extract readable text from this file. If it is scanned or handwritten, enable the option below and run OCR.</div>
          <div class="ocrControls">
            <label class="ocrLabel"><input id="handwrittenCheck" type="checkbox" /> Handwritten paper files</label>
            <button id="runOcrBtn" class="btnSecondary" type="button">Run OCR</button>
          </div>
        </div>
      </section>

      <section class="summary">
        <div class="sectionTitle"><b>Summary</b></div>
        <div id="summaryBox" class="panel">Upload exam notes to begin.</div>
      </section>

      <main class="triCols">
        <section class="col">
          <div class="sectionTitle"><b>Diagnosis</b></div>
          <div id="dxBox" class="panel">No data yet.</div>
        </section>
        <section class="col">
          <div class="sectionTitle"><b>Plan</b></div>
          <div id="planBox" class="panel">No data yet.</div>
        </section>
        <section class="col">
          <div class="sectionTitle"><b>References</b></div>
          <div id="refBox" class="panel">No data yet.</div>
        </section>
      </main>

      <section class="stepBar step2">
        <div class="stepTitle"><span class="stepPill">Step 2</span><span class="stepName">Communicate</span></div>
        <div class="commGrid">
          <div class="field fieldDoc">
            <label class="fieldLabel" for="recipientType">Document type</label>
            <select id="recipientType" class="ctrl">
              <option value="Specialist">Specialist</option>
              <option value="Family physician">Family physician</option>
              <option value="Patient">Patient</option>
              <option value="Insurance">Insurance</option>
              <option value="Other">Other</option>
            </select>
          </div>

          <div class="field fieldTo">
            <label class="fieldLabel" for="toWhom">To</label>
            <input id="toWhom" class="ctrl" placeholder="Dr Lastname" />
          </div>

          <div class="field fieldFrom">
            <label class="fieldLabel" for="fromDoctor">From</label>
            <input id="fromDoctor" class="ctrl" placeholder="Provider" />
          </div>

          <div class="field fieldAction">
            <label class="fieldLabel">&nbsp;</label>
            <button id="generateBtn" class="btnPrimary" type="button">Generate report</button>
            <div id="generateStatus" class="stepStatus">Ready</div>
          </div>

          <div class="field fieldReason">
            <label class="fieldLabel" for="reasonDx">Reason</label>
            <select id="reasonDx" class="ctrl">
              <option value="">Select diagnosis</option>
            </select>
            <input id="reasonOther" class="ctrl hidden" placeholder="Other reason" />
          </div>

          <div class="field fieldFocus">
            <label class="fieldLabel" for="reasonFocus">Referral focus</label>
            <select id="reasonFocus" class="ctrl" disabled>
              <option value="">Select focus</option>
            </select>
            <input id="reasonFocusOther" class="ctrl hidden" placeholder="Other focus" />
          </div>

          <div class="field fieldRequests">
            <label class="fieldLabel" for="specialRequests">Special requests</label>
            <input id="specialRequests" class="ctrl" placeholder="Optional" />
          </div>
        </div>
      </section>

      <section class="output">
        <div id="letterEditor" class="letterEditor" contenteditable="true" aria-label="Letter editor"></div>
        <textarea id="letter" class="hidden" aria-hidden="true"></textarea>
        <div class="outputActions">
          <button id="copyRich" class="btn" type="button">Copy Rich Text</button>
          <button id="copyPlain" class="btn" type="button">Copy Plain Text</button>
          <button id="exportPdf" class="btn" type="button">Export PDF</button>
          <button id="emailBtn" class="btn" type="button">Email</button>
        </div>
      </section>

      <footer class="footer">
        <div class="footerLegal">Maneiro.ai is a documentation support tool. It does not provide medical advice and is not a substitute for professional judgement. You are responsible for verifying accuracy, completeness, and appropriateness before use or transmission.</div>
        <div class="footerLegal">Do not include unnecessary patient identifiers. Use within your clinic privacy requirements and applicable laws. No warranties are provided. To the fullest extent permitted by law, liability is limited for any indirect, incidental, special, or consequential damages.</div>
        <div class="footerSmall">v{{ version }}</div>
      </footer>
    </div>
  </div>
  <div id="faqModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="faqTitle">
    <div class="modalBackdrop" data-close="1"></div>
    <div class="modalCard">
      <div class="modalHeader">
        <div id="faqTitle" class="modalTitle">FAQ</div>
        <button id="faqClose" class="iconBtn" type="button" title="Close">Close</button>
      </div>
      <div class="modalBody">
        <div class="faqItem">
          <div class="faqQ">What does Maneiro.ai do</div>
          <div class="faqA">It turns clinical notes into a structured referral or report letter you can edit and export as a PDF.</div>
        </div>
        <div class="faqItem">
          <div class="faqQ">Does it replace my clinical judgement</div>
          <div class="faqA">No. You remain responsible for review, edits, and the final clinical content before sending.</div>
        </div>
        <div class="faqItem">
          <div class="faqQ">How are references selected</div>
          <div class="faqA">The app pulls relevant PubMed results based on the case and adds canonical consensus or guideline references when a diagnosis has too few citations.</div>
        </div>
        <div class="faqItem">
          <div class="faqQ">Where are cases stored</div>
          <div class="faqA">Cases are saved locally in your browser. Clearing browser storage removes them.</div>
        </div>
      </div>
    </div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>
  <script src="/static/app.js"></script>
</body>
</html>
