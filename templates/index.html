<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI4health</title>
  <link rel="stylesheet" href="/static/app.css" />
  <link rel="icon" href="/static/img/logo.png" type="image/png" />
</head>
<body>
  <header class="topBar">
    <div class="brand">
      <img class="logo" src="/static/img/logo.png" alt="AI4health logo" />
      <div class="brandText">
        <div class="brandName">AI4health</div>
        <div class="brandTag">Enhancing clinical outcomes with evidence based information</div>
      </div>
    </div>

    <div class="topActions">
      <button id="themeBtn" class="iconBtn" type="button" title="Theme">Theme</button>
      <a class="iconBtn linkBtn" href="https://pubmed.ncbi.nlm.nih.gov/" target="_blank" rel="noreferrer" title="PubMed">PubMed</a>
      <button id="resetBtn" class="iconBtn" type="button" title="Reset">Reset</button>
    </div>
  </header>

  <div class="appGrid">
    <aside class="sideBar">
      <div class="sideHeader">
        <div class="sideTitle">Cases</div>
        <button id="newCaseBtn" class="sideBtn" type="button">New</button>
      </div>
      <div id="caseList" class="caseList"></div>
      <div class="sideHint">Cases are stored in this browser only.</div>
    </aside>

    <div class="mainArea">
      <section class="stepBar">
        <div class="stepTitle"><b>STEP 1: ANALYZE</b></div>
        <div class="stepControls">
          <input id="file" type="file" accept="application/pdf" class="fileInput" />
          <button id="uploadBtn" class="btnPrimary" type="button">Upload exam notes</button>
          <div id="analyzeStatus" class="stepStatus">Wait for analysis to complete (waiting)</div>
        </div>
        <div id="ocrPrompt" class="ocrPrompt hidden">
          <div class="ocrText">I could not extract readable text from this file. If it is scanned or handwritten, enable the option below and run OCR.</div>
          <div class="ocrControls">
            <label class="ocrLabel"><input id="handwrittenCheck" type="checkbox" /> Handwritten paper files</label>
            <button id="runOcrBtn" class="btnSecondary" type="button">Run OCR</button>
          </div>
        </div>
      </section>

      <section class="summary">
        <div class="sectionTitle"><b>Summary</b></div>
        <div id="summaryBox" class="panel">Upload exam notes to begin.</div>
      </section>

      <main class="triCols">
        <section class="col">
          <div class="sectionTitle"><b>Diagnosis</b></div>
          <div id="dxBox" class="panel">No data yet.</div>
        </section>
        <section class="col">
          <div class="sectionTitle"><b>Plan</b></div>
          <div id="planBox" class="panel">No data yet.</div>
        </section>
        <section class="col">
          <div class="sectionTitle"><b>References</b></div>
          <div id="refBox" class="panel">No data yet.</div>
        </section>
      </main>

      <section class="stepBar step2">
        <div class="stepTitle"><b>STEP 2: COMMUNICATE</b></div>
        <div class="commControls">
      <select id="recipientType" class="ctrl">
        <option value="Specialist">Specialist</option>
        <option value="Family physician">Family physician</option>
        <option value="Patient">Patient</option>
        <option value="Insurance">Insurance</option>
        <option value="Other">Other</option>
      </select>

      <input id="toWhom" class="ctrl wide" placeholder="TO:" />
      <input id="fromDoctor" class="ctrl wide" placeholder="FROM:" />

      <select id="reasonDx" class="ctrl wide">
        <option value="">REASON:</option>
      </select>
      <input id="reasonOther" class="ctrl wide hidden" placeholder="REASON other" />

      <select id="reasonFocus" class="ctrl wide" disabled>
        <option value="">REFERRAL FOCUS:</option>
      </select>
      <input id="reasonFocusOther" class="ctrl wide hidden" placeholder="REFERRAL FOCUS other" />

      <input id="specialRequests" class="ctrl xwide" placeholder="Special requests" />

      <button id="generateBtn" class="btnPrimary" type="button">Generate Report</button>
      <div id="generateStatus" class="stepStatus">Ready</div>
        </div>
      </section>

      <section class="output">
        <textarea id="letter" class="letter" placeholder="Generated output will appear here"></textarea>
        <div class="outputActions">
          <button id="copyRich" class="btn" type="button">Copy Rich Text</button>
          <button id="copyPlain" class="btn" type="button">Copy Plain Text</button>
          <button id="exportPdf" class="btn" type="button">Export PDF</button>
        </div>
      </section>

      <footer class="footer">
        <div>Created by Dr. Henry Reis, MD, OD, MBA. 2026. All rights reserved.</div>
        <div class="footerSmall">This tool supports HIPAA aligned workflows and uses evidence based sources from PubMed. It does not replace clinical judgement. Always verify outputs before use.</div>
        <div class="footerSmall">v{{ version }}</div>
      </footer>
    </div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>
  <script src="/static/app.js"></script>
</body>
</html>
